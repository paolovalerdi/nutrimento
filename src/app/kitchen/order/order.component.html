<div class="cart-container">

    <div class="cart-container-box">
        <div class="left-container-box">
            <div class="child-box">
                <div class="cart-card-header flex-with-space-between">
                    <div class="flex-item-center">
                        <h2>Ordenes</h2>
                    </div>
                </div>
                <div class="address-box-container">
                    <div class="address-box-card" *ngFor="let order of orders | async; index as i">
                        <div class="address-box-header">
                            <mat-icon fontSet="material-icons-outlined">receipt_long</mat-icon>
                            <h3 style="font-weight: 700; margin-left: 10px">Orden #{{i + 1}}</h3>
                        </div>
                        <div class="address-box-footer">
                            <span style="font-size: 14px;">ID: {{ order.id }}</span><br>
                            <span style="font-size: 14px;">Cliente: {{ order.userEmail }}</span><br>
                            <div style="margin-top: 20px;">
                                <div class="button-box">
                                    <button mat-raised-button class="default-button success-outline"
                                        (click)="mostrarOrden(order.id)" style="width: 150px;">
                                        <span>Ver orden</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="right-container-box">
            <div class="main-box cart-card" style="padding: 0; border-radius: 12px;">
                <div class="cart-card-header flex-with-space-between padding-horizontaly">
                    <div class="flex-item-center">
                        <mat-icon fontSet="material-icons-outlined">receipt_long</mat-icon>
                        <div class="very-small-gap"></div>
                        <h2>Orden</h2>
                    </div>
                    <div style="width: 90px; height: 30px; background-color: #2962ff; color: white; border-radius: 60px; display: flex;" *ngIf="selectedOrder.value.status === 0">
                        <span style="font-size: 14px; margin: auto;">Pendiente</span>
                    </div>
                    <div *ngIf="selectedOrder.value.status === 1" style="width: 90px;  height: 30px; background-color: #00c853; color: black; border-radius: 60px; display: flex;">
                        <span style="font-size: 14px; margin: auto;">En progreso</span>
                    </div>
                    <div *ngIf="selectedOrder.value.status === 2" style="width: 90px; height: 30px; background-color: grey; color: white; border-radius: 60px; display: flex;">
                        <span style="font-size: 14px; margin: auto;">Terminada</span>
                    </div>
                </div>
                <div class="cart-card-body" style="max-height: 280px !important;">
                    <ul>
                        <li class="flex-with-space-between padding" *ngFor="let item of selectedOrder.value.products">
                            <div class="flex-item-center">
                                <span>{{item.quantity}}</span>
                                <div class="small-gap"></div>
                                <span>x</span>
                                <div class="small-gap"></div>
                                <div class="flex-column">
                                    <span> {{item.name}} </span>
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
                <div class="cart-card-footer padding">
                    <button mat-raised-button (click)="cambiarStatus(selectedOrder.value.id,1)" *ngIf="selectedOrder.value.status == 0"
                        class="full-width full-height" style="background-color: #00c853; color: black;">
                        <div class="flex-with-space-between">
                            <span></span>
                            <span>Mover a en progreso</span>
                            <span></span>
                        </div>
                    </button>
                    <button mat-raised-button (click)="cambiarStatus(selectedOrder.value.id, 2)" *ngIf="selectedOrder.value.status == 1"
                        class="full-width full-height" style="background-color: grey; color: white;">
                        <div class="flex-with-space-between">
                            <span></span>
                            <span>Mover a terminada</span>
                            <span></span>
                        </div>
                    </button>
                    
                    <button mat-raised-button (click)="fakePayment()" *ngIf="selectedOrder.value.status == 2"
                        class="full-width full-height" disabled>
                        <div class="flex-with-space-between">
                            <span></span>
                            <span>La orden se ha entregado</span>
                            <span></span>
                        </div>
                    </button>
                </div>
            </div>
        </div>

    </div>
</div>